# ‚ö° –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Backend –Ω–∞ MacBook

## üéØ –ó–∞ 5 –º–∏–Ω—É—Ç

### 1. –£–∑–Ω–∞–π—Ç–µ –≤–∞—à IP

```bash
# –í–Ω–µ—à–Ω–∏–π (–ø—É–±–ª–∏—á–Ω—ã–π) IP
curl ifconfig.me

# –õ–æ–∫–∞–ª—å–Ω—ã–π IP
ifconfig | grep "inet " | grep -v 127.0.0.1
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Backend

–°–æ–∑–¥–∞–π—Ç–µ `backend/.env`:
```env
PORT=3000
HOST=0.0.0.0
RAPIRA_API_URL=https://api.rapira.net/open/market/rates
ORDERS_FILE=./data/orders.json
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
TELEGRAM_ADMIN_CHAT_ID=–≤–∞—à_chat_id
```

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ

1. –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—É—Ç–µ—Ä–∞ (–æ–±—ã—á–Ω–æ `192.168.1.1`)
2. –ù–∞–π–¥–∏—Ç–µ "Port Forwarding" –∏–ª–∏ "–í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã"
3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–æ:
   - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç: `3000`
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP: –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π IP (–Ω–∞–ø—Ä–∏–º–µ—Ä `192.168.1.100`)
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç: `3000`
   - –ü—Ä–æ—Ç–æ–∫–æ–ª: TCP

### 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Firewall –Ω–∞ Mac

**–°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ó–∞—â–∏—Ç–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Üí –ë—Ä–∞–Ω–¥–º–∞—É—ç—Ä:**
- –î–æ–±–∞–≤—å—Ç–µ Node.js –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Backend

```bash
cd backend
npm install
npm start
```

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
curl http://localhost:3000/api/health

# –ò–∑–≤–Ω–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à IP)
curl http://–í–ê–®_IP:3000/api/health
```

### 7. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Frontend

–û–±–Ω–æ–≤–∏—Ç–µ `frontend/.env.local`:
```env
VITE_API_URL=http://–í–ê–®_–°–¢–ê–¢–ò–ß–ï–°–ö–ò–ô_IP:3000
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ frontend:
```bash
cd frontend
npm run dev
```

### 8. –û–±–Ω–æ–≤–∏—Ç–µ Telegram Web App URL

–í @BotFather:
- `/newapp` –∏–ª–∏ `/setmenubutton`
- URL: `http://–í–ê–®_–°–¢–ê–¢–ò–ß–ï–°–ö–ò–ô_IP:5173` (–¥–ª—è dev)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ ngrok –¥–ª—è HTTPS

---

## üîí –í–∞–∂–Ω–æ –¥–ª—è Production

Telegram —Ç—Ä–µ–±—É–µ—Ç **HTTPS** –¥–ª—è Web Apps!

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. **ngrok** (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):
   ```bash
   ngrok http 5173  # –¥–ª—è frontend
   ngrok http 3000  # –¥–ª—è backend
   ```

2. **–°–≤–æ–π –¥–æ–º–µ–Ω + SSL** (–¥–ª—è production):
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –Ω–∞ –≤–∞—à IP
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Let's Encrypt)

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

Backend –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
```
http://–í–ê–®_–°–¢–ê–¢–ò–ß–ï–°–ö–ò–ô_IP:3000
```

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

**Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `HOST=0.0.0.0` –≤ `.env`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ port forwarding –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ Mac

**CORS –æ—à–∏–±–∫–∏:**
- ‚úÖ Backend —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ CORS

**Telegram Web App –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS (ngrok –∏–ª–∏ —Å–≤–æ–π –¥–æ–º–µ–Ω)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [LOCAL_DEPLOY.md](./LOCAL_DEPLOY.md)

